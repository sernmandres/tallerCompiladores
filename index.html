<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taller compiladores</title>
    <link rel="stylesheet" href="css/estilos.css">
</head>

<body>

    <div>
        <div>
            <label for="estado">Cuantos estados:</label>
            <input type="text" name="txtEstados">
        </div>
        <div>
            <label for="simbol">Cuantos Simbolos:</label>
            <input type="text" name="txtSimbolos">
        </div>
        <div>
            <button onclick="generarTabla()"> Generar tabla </button>
        </div>
    </div>

    <!-- Cuerpo de la tabla | botones | interfaz -->
    <table id="tabla" class="tabla">
        <thead>
            <tr>
                <td>Estados</td>
                <td name="simbolos_entrada" colspan="">Simbolos de entrada</td>
                <td>Acepta(1) Rechaza (0)</td>
            </tr>
        </thead>
        <tbody>
        </tbody>

    </table>

    <div>
        <div id="placeholder"></div>
    </div>

    <div>
        <button onclick="agregarRow()"> Añadir fila</button>
        <button onclick="retornarMatriz()"> Convertir AFND A AFD </button>
    </div>

    <div>
        <button id="btnGraficar" disabled="true"> Generar gráfica </button>
        <button id="boton-borrar" disabled="true"> Resetear gráfica </button>
    </div>


    <!-- Genera la tabla con las dimensiones-->
    <script type="module">
        import { Graphviz } from "https://cdn.jsdelivr.net/npm/@hpcc-js/wasm/dist/graphviz.js";

    document.getElementById("btnGraficar").onclick= async ()=>{
        let validarInfo = validar()
        console.log("validarInfo.existe " , validarInfo.existe)
        if(validarInfo.existe) {
        let dfa = validarInfo.dfa
        console.log("dfa " , dfa)
        const graphviz = await Graphviz.load();
        let graficar = dfa.toDotString()
        const svg = graphviz.dot(graficar);
        const div = document.getElementById("placeholder");
        div.innerHTML = graphviz.layout(graficar, "svg", "dot");

        let resetGrafica = document.getElementById("boton-borrar");
        resetGrafica.disabled = false;

    } else{
        console.log("No se genera")
    }
    };

    document.getElementById("boton-borrar").onclick = () =>{
        let elemento = document.getElementById("placeholder");
        elemento.innerHTML = ""
    }   

   

    </script>
    <script src="js/generarAFND.js"></script>
    <script src="js/validar.js"></script>
    <script src="js/generarAFD.js"></script>

</html>